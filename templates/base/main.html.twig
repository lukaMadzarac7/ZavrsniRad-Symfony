{% extends 'base/index.html.twig' %}


{% block body %}
    <script>
        function changeButtons(){
            var nudim = document.getElementById("nudim");
            var trazim = document.getElementById("trazim");

            if(nudim.classList.contains("btn-primary")){
                nudim.classList.remove("btn-primary");
                nudim.classList.add("btn-secondary");
                trazim.classList.remove("btn-secondary");
                trazim.classList.add("btn-primary");
            }else{
                trazim.classList.remove("btn-primary");
                trazim.classList.add("btn-secondary");
                nudim.classList.remove("btn-secondary");
                nudim.classList.add("btn-primary");
            }

        }


    </script>

    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
        <ol class="carousel-indicators">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>

        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img class="d-block w-100" src="https://drive.google.com/uc?export=view&id=1inEYaL3QQ5vWCPxEQuTMDt-UacDfSK3a" alt="First slide"
                     style="object-fit:cover;
                                            height:450px;
                                            border: solid 1px #CCC"
                >
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="https://drive.google.com/uc?export=view&id=1a4f0zGqljztc9QjlwProLvSlICjA5Ned" alt="Second slide"
                     style="object-fit:cover;
                                            height:450px;
                                            border: solid 1px #CCC"
                >
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="https://drive.google.com/uc?export=view&id=1vj_YFoB2UiPyvOdE2Ihab0BQHc6N0gaH" alt="Third slide"
                     style="object-fit:cover;
                                            height:450px;
                                            border: solid 1px #CCC">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="https://drive.google.com/uc?export=view&id=12AsgahtNighv99qNSBxPTzRlTjUqxEfo" alt="Fourth slide"
                     style="object-fit:cover;
                                            height:450px;
                                            border: solid 1px #CCC">
            </div>
            <div class="carousel-item">
                <img class="d-block w-100" src="https://drive.google.com/uc?export=view&id=1RKkOeqNmQ_hoGaiiAjBI__qRd5BmtBt3" alt="Fifth slide"
                     style="object-fit:cover;
                                            height:450px;
                                            border: solid 1px #CCC">
            </div>
        </div>
        <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>

    <div class="container">

    <div class="container-xxl py-5">
        <div class="container">
            <h1 class="text-center mb-5 wow fadeInUp" data-wow-delay="0.1s">Aktivne usluge na Portalu</h1>
            <div class="tab-class text-center wow fadeInUp" data-wow-delay="0.3s">
                <ul class="nav nav-pills d-inline-flex justify-content-center border-bottom mb-5">
                    <li class="nav-item">
                        <a class="d-flex align-items-center text-start mx-3 ms-0 pb-3 active" data-bs-toggle="pill" href="#tab-1" style="text-decoration:none" >
                            <button id="nudim" onclick="changeButtons();" type="button" class="btn btn-primary">Nudi se</button>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="d-flex align-items-center text-start mx-3 pb-3" data-bs-toggle="pill" href="#tab-2" style="text-decoration:none" >
                            <button id="trazim" onclick="changeButtons();" type="button" class="btn btn-secondary">Traži se</button>
                        </a>
                    </li>
                </ul>
            <br>

                <form action="{{ path('app_base') }}">
                    <div class="input-group">
                        <input type="search" name="q" value="{{ app.request.query.get('q') }}" class="form-control rounded" placeholder="Pretraži usluge..." aria-label="Search" aria-describedby="search-addon" />
                    </div>
                    <br>
                    <br>
                    <div class="row">
                    <select class= "form-control col-sm-4" aria-label="Default select example" name="field" id="field">
                        <option value="anyField"
                                {% if selectedField != null%}
                                    {% if selectedField == 'anyField'  %}
                                        selected
                                    {% endif %}
                                {% endif %}
                        >Sve vrste</option>
                        {% for field in serviceFields %}
                            <option value="{{ field }}"
                                    {% if selectedField != null%}
                                        {% if selectedField == field  %}
                                            selected
                                        {% endif %}
                                    {% endif %}
                            >{{ field }}</option>
                        {% endfor %}
                    </select>
                    <select class= "form-control col-sm-4" name="county" id="county">
                        <option value="anyCounty"
                                {% if selectedCounty != null%}
                                    {% if selectedCounty == 'anyCounty'  %}
                                        selected
                                    {% endif %}
                                {% endif %}
                        >Sve županije</option>
                        {% for county in counties %}
                            <option value="{{ county }}"
                                    {% if selectedCounty != null%}
                                        {% if selectedCounty == county  %}
                                            selected
                                        {% endif %}
                                    {% endif %}
                            >{{ county }}</option>
                        {% endfor %}
                    </select>
                    <select class= "form-control col-sm-4" name="city" id="city">
                        <option value="anyCity"
                                {% if selectedCity != null%}
                                    {% if selectedCity == 'anyCity'  %}
                                        selected
                                    {% endif %}
                                {% endif %}
                        >Svi gradovi</option>
                        {% for city in cities %}
                            <option value="{{ city }}"
                                    {% if selectedCity != null%}
                                        {% if selectedCity == city  %}
                                            selected
                                        {% endif %}
                                    {% endif %}
                            >{{ city }}</option>
                        {% endfor %}
                    </select>
                    </div>

                    <br><br>
                    <button class="btn btn-primary" type="submit">Filtriraj usluge</button>
                    <br><br><br>
                </form>

                <div class="tab-content">
                    <div id="tab-1" class="tab-pane fade show p-0 active">
                        <div class="row">
                            {% for service in services %}
                            {% if service.serviceType == '1' and service.serviceStatus != 'Nedostupno' %}

                                <div class="col-sm-6">
                                    <div class="card mb-4">
                                        {% if service.serviceImages.first != null %}
                                            {% set break = false %}
                                            {% for image in service.serviceImages %}
                                                {% if not break %}
                                                    {% if 'http' in image.image %}
                                                        <img class="card-img-top" src="{{ image.image }}"
                                                             style="object-fit:cover;
                                            height:250px;
                                            border: solid 1px #CCC"alt="Card image cap">
                                                    {% else %}
                                                        {% set imgPath = 'uploads/' ~ image.image %}
                                                        <img class="card-img-top" src="{{ asset(imgPath) }}"
                                                             style="object-fit:cover;
                                            height:250px;
                                            border: solid 1px #CCC"alt="Card image cap">
                                                    {% endif %}
                                                {% set break = true %}
                                                {% endif %}
                                            {% endfor %}

                                        {% else %}
                                            <img class="card-img-top" src="https://tehnoprom.rs/sites/default/files/default_images/slika-nedostupna-proizvod_0.jpg"
                                                 style="object-fit:cover;
                                            height:250px;
                                            border: solid 1px #CCC"alt="Card image cap">
                                        {% endif %}

                                        <div class="card-body">
                                            <h5 class="card-title">{{ service.title }}</h5>
                                            <p class="card-text">{{ service.description|u.truncate(50, '...', false) }}</p>
                                            <p class="card-text"><b>Cijena: </b>{{ service.price }} €</p>
                                            {% if service.serviceStatus == 'Dostupno' %}
                                                <p style = "color:green;" class="card-text"><b>Dostupno do: {{ service.deadline ? service.deadline|date("d.m.20y.") }}</b></p>
                                            {% else %}
                                                {% if service.serviceStatus == 'Privremeno nedostupno' %}
                                                    <p style = "color:darkgoldenrod;" class="card-text"><b>Privremeno nedostupno</b></p>
                                                {% endif %}
                                            {% endif %}

                                            <a href="{{ path('app_service_details', {'id': service.id})}}" class="btn btn-primary">Vidi detalje</a>
                                        </div>
                                    </div>
                                </div>

                        {% endif %}
                        {% endfor %}
                        </div>
                    </div>

                    <div id="tab-2" class="tab-pane fade show p-0">
                        <div class="row">


                        {% for service in services %}
                            {% if service.serviceType == '2' and service.serviceStatus != 'Nedostupno' %}

                                <div class="col-sm-6">
                                    <div class="card mb-4">
                                        {% if service.serviceImages.first != null %}
                                            {% set break = false %}
                                            {% for image in service.serviceImages %}
                                                {% if not break %}
                                                    <img class="card-img-top" src="{{ image.image }}"
                                                         style="object-fit:cover;
                                            height:250px;
                                            border: solid 1px #CCC"alt="Card image cap">
                                                    {% set break = true %}
                                                {% endif %}
                                            {% endfor %}

                                        {% else %}
                                            <img class="card-img-top" src="https://tehnoprom.rs/sites/default/files/default_images/slika-nedostupna-proizvod_0.jpg"
                                                 style="object-fit:cover;
                                            height:250px;
                                            border: solid 1px #CCC"alt="Card image cap">
                                        {% endif %}
                                        <div class="card-body">
                                            <h5 class="card-title">{{ service.title }}</h5>
                                            <p class="card-text">{{ service.description|u.truncate(50, '...', false) }}</p>
                                            <p class="card-text"><b>Cijena: </b>{{ service.price }} €</p>
                                            {% if service.serviceStatus == 'Dostupno' %}
                                                <p style = "color:green;" class="card-text"><b>Dostupno do: {{ service.deadline ? service.deadline|date("d.m.20y.") }}</b></p>
                                            {% else %}
                                                {% if service.serviceStatus == 'Privremeno nedostupno' %}
                                                    <p style = "color:darkgoldenrod;" class="card-text"><b>Privremeno nedostupno</b></p>
                                                {% endif %}
                                            {% endif %}

                                            <a href="{{ path('app_service_details', {'id': service.id})}}" class="btn btn-primary">Vidi detalje</a>
                                        </div>
                                    </div>
                                </div>

                            {% endif%}
                            {% endfor %}
                    </div>
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>


{% endblock %}